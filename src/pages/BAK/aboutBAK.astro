---
import Baselayout from "src/layout/Baselayout.astro";
import Map from "@components/Map.astro";
import data from "../data/mapData.js";
import { Icon } from "astro-icon/components";

// Sort churches alphabetically by name
data.sort((a, b) => {
  const nameA = a.name.toUpperCase();
  const nameB = b.name.toUpperCase();

  if (nameA < nameB) return -1;
  if (nameA > nameB) return 1;
  return 0;
});
---

<Baselayout>
  <main class="base-layout">
    <section class="cover mb-6">
      <h2 class="mb-4 text-3xl font-bold md:mb-5 md:text-4xl">
        We are <span class="text-accent">
          a group of like-minded churches in southern MN
        </span> partnering together to start and strengthen other like-minded churches
        in southern MN.
      </h2>
      <button
        class="btn btn-ghost bounce-down text-neutral mt-8 place-self-center"
        onclick="document.querySelector('#churches').scrollIntoView({behavior: 'smooth', inline: 'center'})">
        Churches <Icon name="mdi:arrow-down" />
      </button>
    </section>
    <section id="churches">
      <h2 class="mb-4 text-3xl font-bold @3xl/main:mb-5 @3xl/main:text-4xl">
        Churches
      </h2>
      <Map {data} />
      <ul class="mt-6">
        {
          data.map(({ url, name, city }) => (
            <li>
              <a href={url}>
                {name} ({city})
              </a>
            </li>
          ))
        }
      </ul>
    </section>
    <section class="mt-6">
      <h2 class="mb-4 text-3xl font-bold @3xl/main:mb-5 @3xl/main:text-4xl">
        Friends & Partners
      </h2>
      <ul>
        <li>
          <a href="https://tctnetwork.org/">
            Treasuring Christ Together Network
          </a>
        </li>
        <li>
          <a href="https://www.smnba.org/">Southern MN Baptist Association</a>
        </li>
        <li>
          <a href="https://bcsmn.edu/">Bethlehem College and Seminary</a>
        </li>
      </ul>
    </section>
  </main>
</Baselayout>

<style>
  main {
    min-block-size: 100vh;
    display: grid;
    place-content: center;
  }
  section {
    min-block-size: 100vh;
    display: grid;
    align-content: center;
    scroll-snap-stop: always;
    scroll-snap-align: start;
  }
</style>
