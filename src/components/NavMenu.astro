---
const path = Astro.url.pathname;

let visible;

// TODO: get location.hash and do not use xshow when navigating to /#vision

if (path === "/") {
  visible = "$store.menu";
} else {
  visible = true;
}
---

<!-- TODO: Fix active link highlighting -->
<script>
  console.log(location.hash);
</script>

<aside
  x-data
  x-show={visible}
  x-transition.delay.100ms
  class="layout-base bg-base-100 fixed z-10 h-auto w-full items-center py-4 md:py-6 xl:flex xl:h-full xl:w-auto xl:py-0 xl:pl-9">
  <ul
    class="text-neutral/50 text-xxs xs:text-xs flex w-full justify-around gap-4 sm:text-base md:text-xl xl:flex-col xl:text-2xl">
    <li>
      <a
        href="/#vision"
        class:list={[
          "hover:text-neutral hover-underline-animation",
          path === "/" && "text-neutral active-accent",
        ]}>
        Our Vision
      </a>
    </li>
    <li>
      <a
        href="/strategy"
        class:list={[
          "hover:text-neutral hover-underline-animation",
          path === "/strategy" && "text-neutral active-accent",
        ]}>
        Our Strategy
      </a>
      <!-- <ul class:list={["mt-6 ml-6", path === "/strategy" ? "" : "hidden"]}>
        <li>
          <button
            onclick="document.querySelector('#fellowship').scrollIntoView({behavior: 'smooth', inline: 'center'})"
            class="hover:text-neutral hover-underline-animation hover:cursor-pointer"
            >Fellowship</button
          >
        </li>
        <li>
          <button
            onclick="document.querySelector('#internship').scrollIntoView({behavior: 'smooth', inline: 'center'})"
            class="hover:text-neutral hover-underline-animation hover:cursor-pointer"
            >Internships</button
          >
        </li>
        <li>
          <button
            onclick="document.querySelector('#residency').scrollIntoView({behavior: 'smooth', inline: 'center'})"
            class="hover:text-neutral hover-underline-animation hover:cursor-pointer"
            >Residencies</button
          >
        </li>
        <li>
          <button
            onclick="document.querySelector('#events').scrollIntoView({behavior: 'smooth', inline: 'center'})"
            class="hover:text-neutral hover-underline-animation hover:cursor-pointer"
            >Events</button
          >
        </li>
      </ul> -->
    </li>
    <li>
      <a
        href="/about"
        class:list={[
          "hover:text-neutral hover-underline-animation",
          path === "/about" && "text-neutral active-accent",
        ]}>
        Who we Are
      </a>
    </li>
    <li>
      <a
        class="hover:text-neutral hover-underline-animation"
        href="mailto:hello@smntct.org">
        Contact
      </a>
    </li>
    <li
      class="text-accent hover:text-neutral hover-underline-animation font-bold uppercase xl:-order-1">
      <a href="/">Southern MN TCT</a>
    </li>
  </ul>
</aside>

<style>
  .hover-underline-animation {
    display: inline-block;
    position: relative;
  }

  .hover-underline-animation::after {
    content: "";
    position: absolute;
    width: 100%;
    transform: scaleX(0);
    height: 2px;
    bottom: 0;
    left: 0;
    background-color: var(--color-accent);
    transform-origin: bottom right;
    transition: transform 0.25s ease-out;
  }

  .active-accent::after {
    content: "";
    position: absolute;
    width: 100%;
    transform: scaleX(1);
    height: 2px;
    bottom: 0;
    left: 0;
    background-color: var(--color-accent);
    transform-origin: bottom right;
    transition: transform 0.25s ease-out;
  }

  .hover-underline-animation:hover::after {
    transform: scaleX(1);
    transform-origin: bottom left;
  }

  aside {
    /* height: 100%; */
    /* position: fixed; */
    /* display: flex; */
    /* align-items: center; */
    /* justify-content: center; */
    /* z-index: 1; */
    /* padding-inline-start: 1.5rem; */
    /* overflow-x: hidden; */
    /* background-color: var(--color-base-100); */

    ul > li {
      /* margin-block-end: 1rem; */
    }
  }

  @media (width <= 74rem) {
    aside {
      /* --max-width: 80ch; */
      /* --padding: 36px; */

      /* display: grid; */
      /* grid-template-columns:
        minmax(var(--padding), 1fr)
        min(var(--max-width), 100% - var(--padding) * 2)
        minmax(var(--padding), 1fr); */

      /* padding-inline-start: 0; */
      /* padding-block-start: 1.5rem; */
      /* align-items: start; */
      /* width: 100%;
      height: auto; */

      /* & > * {
        grid-column: 2/3;
      } */
      /* & > .full-width {
        grid-column: 1/ -1;
      } */

      & > ul {
        /* display: flex; */
        /* gap: 3rem; */
        /* width: 100%; */
        /* justify-content: space-around; */

        & > li > a {
          /* font-size: 1.25rem; */
        }
      }
    }
  }

  @media (width <= 48rem) {
    aside > ul > li > a {
      /* font-size: 1rem; */
    }
  }

  @media (width <= 30rem) {
    aside > ul > li > a {
      /* font-size: 0.75rem; */
    }
  }
</style>
